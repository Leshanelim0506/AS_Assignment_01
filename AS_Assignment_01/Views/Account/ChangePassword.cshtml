@model AS_Assignment_01.Models.ChangePasswordViewModel
@{
    Layout = "_Layout";
    ViewData["Title"] = "Security Update";
}

<div class="row align-items-center justify-content-center py-5" style="min-height: 80vh;">
    <div class="col-xl-10 col-lg-11">
        <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
            <div class="row g-0">

                <div class="col-lg-7 p-5 bg-white">
                    <div class="mb-5">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-primary bg-opacity-10 p-2 rounded-3 me-3">
                                <i class="bi bi-shield-lock-fill text-primary fs-3"></i>
                            </div>
                            <h3 class="fw-bold text-dark mb-0">Security Update</h3>
                        </div>
                        <p class="text-muted">Authorize a credential change for your Ace Job account.</p>
                    </div>

                    <form asp-action="ChangePassword" method="post">
                        @Html.AntiForgeryToken()

                        <div asp-validation-summary="All" class="alert alert-danger py-2 small border-0 shadow-sm mb-4 @(ViewData.ModelState.IsValid ? "d-none" : "")"></div>

                        <div class="mb-4">
                            <label class="form-label small fw-bold text-muted ls-1">CURRENT PASSWORD</label>
                            <div class="input-group shadow-sm border rounded-3 overflow-hidden">
                                <span class="input-group-text bg-white border-0"><i class="bi bi-key text-primary"></i></span>
                                <input asp-for="CurrentPassword" type="password" class="form-control border-0 py-2" placeholder="Verify identity" />
                            </div>
                        </div>

                        <hr class="my-4 opacity-10">

                        <div class="mb-4">
                            <label class="form-label small fw-bold text-muted ls-1">NEW SECURE PASSWORD</label>
                            <div class="input-group shadow-sm border rounded-3 overflow-hidden">
                                <span class="input-group-text bg-white border-0"><i class="bi bi-plus-circle text-primary"></i></span>
                                <input asp-for="NewPassword" type="password" id="newPass" class="form-control border-0 py-2"
                                       onkeyup="checkStrength()" placeholder="Min. 12 characters" />
                            </div>

                            <div class="progress mt-3" style="height: 6px; border-radius: 10px;">
                                <div id="pwBar" class="progress-bar transition-all" role="progressbar" style="width: 0%"></div>
                            </div>
                            <div class="d-flex justify-content-between mt-2">
                                <div id="pwStatus" class="extra-small fw-bold"></div>
                                <div class="extra-small text-muted fw-medium">Strength Indicator</div>
                            </div>
                        </div>

                        <div class="mb-5">
                            <label class="form-label small fw-bold text-muted ls-1">CONFIRM NEW PASSWORD</label>
                            <div class="input-group shadow-sm border rounded-3 overflow-hidden">
                                <span class="input-group-text bg-white border-0"><i class="bi bi-shield-check text-primary"></i></span>
                                <input asp-for="ConfirmPassword" type="password" class="form-control border-0 py-2" placeholder="Repeat new password" />
                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-8">
                                <button type="submit" class="btn btn-primary w-100 fw-bold py-3 rounded-pill shadow hover-lift">
                                    UPDATE CREDENTIALS
                                </button>
                            </div>
                            <div class="col-4">
                                <a asp-action="Index" class="btn btn-light w-100 fw-bold py-3 rounded-pill">CANCEL</a>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="col-lg-5 bg-primary p-5 text-white d-flex flex-column justify-content-center">
                    <div class="isometric-decoration mb-5">
                        <div class="bg-text opacity-10" style="font-size: 8rem; position: absolute; top: -20px; right: -20px;">SAFE</div>
                        <i class="bi bi-shield-shaded display-1 opacity-25"></i>
                    </div>

                    <h4 class="fw-bold mb-4 border-bottom border-white border-opacity-25 pb-2">Credential Policies</h4>

                    <div class="policy-list">
                        <div class="d-flex align-items-start mb-4">
                            <div class="bg-white bg-opacity-20 rounded p-2 me-3"><i class="bi bi-check-lg"></i></div>
                            <div>
                                <h6 class="fw-bold mb-1">Complexity Requirements</h6>
                                <p class="small opacity-75 mb-0">Must include uppercase, lowercase, numbers, and symbols.</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-start mb-4">
                            <div class="bg-white bg-opacity-20 rounded p-2 me-3"><i class="bi bi-clock-history"></i></div>
                            <div>
                                <h6 class="fw-bold mb-1">Password Age Policy</h6>
                                <p class="small opacity-75 mb-0">Intervals apply to prevent rapid repetitive changes.</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-start">
                            <div class="bg-white bg-opacity-20 rounded p-2 me-3"><i class="bi bi-history"></i></div>
                            <div>
                                <h6 class="fw-bold mb-1">Reuse Limitation</h6>
                                <p class="small opacity-75 mb-0">You cannot reuse your most recent 2 historical passwords.</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<style>
    .ls-1 {
        letter-spacing: 0.5px;
    }

    .extra-small {
        font-size: 0.7rem;
    }

    .transition-all {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .hover-lift {
        transition: transform 0.2s ease;
    }

        .hover-lift:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
        }
</style>